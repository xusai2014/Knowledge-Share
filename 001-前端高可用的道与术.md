
## 前端高可用的道与术

### 一、监控预警体系

**核心指标稳定性、高可用**

>>> 移动端的不可用场景，闪退、白屏黑屏、打不开页面、功能无法正常使用，要做的事情是降低不可用场景，快速解决不可用问题。

APP技术很成熟，开发、测试、灰度验证流程，在一定程度上保证了APP可用性。问题在于千分之一的影响率随着用户量级增长，问题是会被放大，就是不可用风险。
动态化修复方案，频繁的动态变更增加了可用性风险。风险带来压力和挑战，如何解决这个问题？ **高可用监控技术体系**。

---

#### 高可用监控体系的发展历程

+ 1.0 时代
          
 ```
 闪退监控--->诊断上报-->监控闪退率-->分析解决-->发布新版 
 ```
---          
+ 2.0 时代
   - 稳定性监控体系，丰富监控问题点，提高了诊断能力和修复能力。
   - 监控日志全，特征、局部不可用问题无法准确通过监控平台描述出来，日志分析并不能马上定位所有问题， 问题发现后有可能等待发版，出现不可用场景
---
+ 3.0 时代   
   - 重新定义客户端高可用：通过专门设计结合整套技术体系，保持用户遇到不可用的总次数很低。
   - 高可用目标，可用率4个9。什么是可用率，是可用次数在使用次数的占比，99.99%高可用率。
        
   努力达到这个目标，如下措施：
   1. 可用性监控（**做好日志监控**）
      - 问题采集，如何采集到较全不可用问题？不可用问题分为，稳定性不可用（收集不到的不断收集类型补充进来）、业务不可用（业务不可用埋点）。
      - 统一管控，采集问题后，做出整体性、全面性可用率指标， 通过指标反应APP在使用人群中状况？对问题进行分类，建立特征，以此设计监控和报警。优化稳定性监控方案
      - 埋点上报，提高埋点准确性、实时率、到达率。 如何保证不可用情况下埋点实时上报，Android（独立进程上送）、IOS（ 延迟退出，先上送完日志，
            下一次打开补偿上送）
              
    2. 高灵敏报警平台 （**提早发现问题**）
       - 收集到问题后，做出报警，提早发现问题。
       - 分析与决策，当早期少量用户出现问题时，基于人群特征、问题特征 ，聚合采集到问题，设定规则判断是否不可用事件。分发问题到开发和测试人员， 
            
    3. 高可用容灾平台
       - 故障分类：非变更故障、变更故障
       - 变更故障，根据版本记录追踪问题，判断是否可以回滚，如不可回滚，启动紧急发布，如不可发布依 赖客户端修复
       - 非变更故障，收集系统灰度发布不兼容性问题、本地脏数据、安装问题、代码bug等，本地容灾、动态修复，为不同类型问题提供确定解决方案。
           
    4. 快速修复能力 （**建立问题严重性级别，设定修复时间**）
       - APP发布比较困难，使用动态修复，hot patch、数据化配置、重新部署模块，修复原则效率最高、风险最低。
       - 稳定下发通道，保证用户可以在极端情况下可以拉取修复方案。
       - 定点推送修复方案，只推送给需要使用的人。
           
    5. 故障演练
       - 可控成本进行先上故障发现快速解决，检验高可用。
       - 攻防演练方式，提高稳定性监控系统使用效率。
           
 留下小小的延申話題點？
  - 智能化（不可用问题的决策采用深度学习，去实现智能报警）
  - 自动化（容灾自动化）
  - 产品化（监控系统产品化）

---

### 二、网络应用质量

>>> 提高用户体验是在网络分发健康、程序代码时间复杂度合理基础之上。这两者必须结合在一起去讨论，脱离里哪一方都无法建立说的通的方案，这里涉及到一个平衡。

- [《高性能浏览网络》](http://shop.oreilly.com/product/0636920028048.do)
如何构建快速和高效的网络应用，从网络这个切入点，可以从影响性能的限制到如何构建强大浏览器的诸多创新层面去探讨（***HHTP2.0、WebRTC、XHR IMPROveMENTS、Websockets、Server-sent Events***）。




HTTP1与HTTP2
网络传输协议版本


              
